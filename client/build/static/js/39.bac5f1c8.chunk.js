"use strict";(self.webpackChunkreact_i=self.webpackChunkreact_i||[]).push([[39],{6039:function(e,r,n){n.r(r);var o=n(4942),s=n(1413),t=n(5861),a=n(9439),i=n(3433),c=n(7757),l=n.n(c),d=n(2791),u=n(2152),h=n(7247),x=n(2419),m=n(1889),f=n(6151),Z=n(627),p=n(9836),j=n(6890),v=n(5855),b=n(3994),w=n(3382),g=n(5931),k=n(3400),C=n(5574),y=n(5661),S=n(9157),z=n(1691),R=n(7123),A=n(7133),P=n(9012),M=n(5523),N=n(4454),H=n(1286),U=n(3553),F=n(5193),L=n(3967),D=n(3504),T=n(6960),E=n(4677),q=n(5560),O=n(184),V=function(e){var r=e.filter((function(e){return"admin"===e.role})).sort((function(e,r){return e.username>=r.username?1:-1})),n=e.filter((function(e){return"customer"===e.role})).sort((function(e,r){return e.username>=r.username?1:-1})),o=e.filter((function(e){return"user"===e.role})).sort((function(e,r){return e.username>=r.username?1:-1}));return[].concat((0,i.Z)(n),(0,i.Z)(o),(0,i.Z)(r))};function B(e){var r=e.open,n=e.handleClose,t=e.username,i=(0,d.useContext)(u.Z).useAxiosPrivate(),c=(0,L.Z)(),l=(0,F.Z)(c.breakpoints.down("md")),h=(0,d.useState)(""),x=(0,a.Z)(h,2),m=x[0],Z=x[1],p=(0,d.useState)({id:!0,username:!0,email:!0,address:!0,marketingPreference:!0,createdAt:!0,role:!0,orders:!0,reviews:!0}),j=(0,a.Z)(p,2),v=j[0],b=j[1];return(0,O.jsxs)(C.Z,{fullScreen:l,open:r,onClose:n,"aria-labelledby":"responsive-dialog-title",children:[(0,O.jsx)(y.Z,{id:"responsive-dialog-title",sx:{color:"orange"},children:(0,O.jsx)("b",{children:"Download User & Related Data"})}),(0,O.jsxs)(S.Z,{children:[(0,O.jsx)(A.Z,{component:"legend",children:"Select the data you wish to download for this User"}),(0,O.jsx)(P.Z,{children:Object.keys(v).map((function(e){return(0,O.jsx)(M.Z,{control:(0,O.jsx)(N.Z,{checked:v[e],onChange:function(r){b((function(n){return(0,s.Z)((0,s.Z)({},n),{},(0,o.Z)({},e,r.target.checked))}))}}),label:e},e)}))})]}),(0,O.jsxs)(R.Z,{children:[(0,O.jsx)(f.Z,{color:"error",autoFocus:!0,onClick:n,children:"Close"}),!m&&(0,O.jsx)(f.Z,{color:"primary",onClick:function(){var e={};Object.keys(v).forEach((function(r){!0===v[r]&&(e=(0,s.Z)((0,s.Z)({},e),{},(0,o.Z)({},r,v[r])))})),console.log(e),i.get("/user/username/".concat(t),{params:e}).then((function(e){var r=e.data;Z(URL.createObjectURL(new Blob([JSON.stringify(r)],{type:"application/json"})))})).then((function(){T.Am.success("Fetched data successfully")})).catch((function(e){T.Am.error("Could not fetch required data")}))},autoFocus:!0,children:"Fetch Selected data"}),m&&(0,O.jsx)(f.Z,{component:"a",href:m,download:"".concat(t,".json"),variant:"contained",startIcon:(0,O.jsx)(q.Z,{}),children:"Download Json file"})]})]})}r.default=function(){var e=(0,d.useState)([]),r=(0,a.Z)(e,2),n=r[0],o=r[1],s=(0,d.useState)(!1),c=(0,a.Z)(s,2),A=c[0],P=c[1],M=(0,d.useState)(!1),N=(0,a.Z)(M,2),I=N[0],J=N[1],W=(0,d.useState)(""),_=(0,a.Z)(W,2),G=_[0],K=_[1],Q=(0,d.useState)(""),X=(0,a.Z)(Q,2),Y=X[0],$=X[1],ee=(0,d.useContext)(u.Z).useAxiosPrivate(),re=(0,L.Z)(),ne=(0,F.Z)(re.breakpoints.down("md")),oe=(0,d.useState)(!1),se=(0,a.Z)(oe,2),te=se[0],ae=se[1],ie=function(){var e=(0,t.Z)(l().mark((function e(){var r,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=T.Am.loading("Processing request"),e.prev=1,e.next=4,E.ZP.post("updates/resetPasswordRequest",{email:Y,username:G});case 4:n=e.sent,T.Am.update(r,{render:n.data,type:"success",isLoading:!1,autoClose:1500}),ce(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),e.t0.response?T.Am.update(r,{render:e.t0.response.data,type:"error",isLoading:!1}):T.Am.update(r,{render:"Server Unavailable. Try again later",type:"error",isLoading:!1});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),ce=function(){J(!1)};return(0,d.useEffect)((function(){var e=new AbortController;return(0,t.Z)(l().mark((function r(){var n,s,t;return l().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,ee.get("/user/multiple",{signal:e.signal,params:{id:!0,username:!0,email:!0,role:!0}});case 3:n=r.sent,s=n.data,t=[],s.forEach((function(e,r){var n=e.username,o=e.email,s=e.role,a=e.id;t=[].concat((0,i.Z)(t),[{id:a,username:n,email:o,role:s}])})),o(V(t)),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(0),console.log(r.t0);case 13:case"end":return r.stop()}}),r,null,[[0,10]])})))(),function(){e.abort()}}),[ee]),(0,O.jsx)(O.Fragment,{children:(0,O.jsx)("div",{children:n&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(m.ZP,{item:!0,children:(0,O.jsxs)("div",{style:{height:700,width:"100%"},children:[(0,O.jsx)(f.Z,{component:D.rU,to:"newUser",variant:"contained",sx:{my:4},startIcon:(0,O.jsx)(x.Z,{}),children:"Create new User"}),(0,O.jsx)(Z.Z,{in:!0,timeout:2500,children:(0,O.jsxs)(p.Z,{style:{borderRadius:"4px",marginBlock:"5px",border:"1px solid #cee0f3"},children:[(0,O.jsx)(j.Z,{children:(0,O.jsx)(v.Z,{sx:{borderRadius:4,backgroundColor:"#1976d2"},children:[{id:1,field:"id",headerName:"#",width:75},{id:2,field:"username",headerName:"Username",width:175},{id:3,field:"email",headerName:"Email",width:220},{id:4,field:"role",headerName:"Role"},{id:5,field:"Password Reset",headerName:"Password Reset",width:150},{id:6,field:"actions",headerName:"Actions",width:220}].map((function(e){return(0,O.jsx)(b.Z,{sx:{textTransform:"uppercase",color:"white"},children:e.headerName},"".concat(e.id))}))})}),(0,O.jsx)(w.Z,{children:n.map((function(e,r){return(0,O.jsx)(g.Z,{in:!0,direction:r%2===0?"left":"right",timeout:100*(r+1),children:(0,O.jsxs)(v.Z,{sx:{"&:nth-of-type(even)":{backgroundColor:"#cee0f3"},"&:last-child td, &:last-child th":{border:0}},children:[(0,O.jsx)(b.Z,{children:r}),(0,O.jsx)(b.Z,{children:e.username}),(0,O.jsx)(b.Z,{children:e.email}),(0,O.jsx)(b.Z,{children:e.role}),(0,O.jsx)(b.Z,{children:(0,O.jsx)(f.Z,{size:"small",sx:{border:"none",backgroundColor:"white",boxShadow:1},onClick:function(){ae(!1),$(e.email),K(e.username),J(!0)},children:(0,O.jsx)(U.Z,{sx:{color:"red"}})})}),(0,O.jsxs)(b.Z,{sx:{minWidth:"200px"},children:[(0,O.jsx)(k.Z,{size:"small",component:D.rU,to:"/dashboard/user/".concat(e.id),sx:{backgroundColor:"white",color:"#039be5",mx:1,boxShadow:2},children:(0,O.jsx)(H.Z,{fontSize:"10px"})}),(0,O.jsx)(k.Z,{onClick:function(){ae(!0),K(e.username),$(e.email),J(!0)},size:"small",sx:{backgroundColor:"white",color:"red",mx:1,boxShadow:2},children:(0,O.jsx)(h.Z,{fontSize:"10px"})}),(0,O.jsx)(k.Z,{onClick:function(){K(e.username),P(!0)},size:"small",sx:{backgroundColor:"white",color:"#e1ad01",mx:1,boxShadow:2},children:(0,O.jsx)(q.Z,{fontSize:"10px"})})]})]})},"".concat(e.id))}))})]})})]})}),(0,O.jsx)(B,{open:A,handleClose:function(){P(!1)},username:G}),(0,O.jsxs)(C.Z,{sx:{"& .MuiDialog-paper":{backgroundColor:"white",borderRadius:"1rem",paddingTop:"1rem"}},fullScreen:ne,open:I,onClose:ce,"aria-labelledby":"responsive-dialog-title",children:[(0,O.jsx)(y.Z,{id:"responsive-dialog-title",sx:{color:"orange"},children:(0,O.jsx)("b",{children:"Warning!"})}),(0,O.jsxs)(S.Z,{children:[!te&&(0,O.jsxs)(z.Z,{children:["Are you sure you want to send a Password Reset link to"," ",(0,O.jsxs)("b",{style:{color:"black"},children:[Y&&Y,"?"]})," ",(0,O.jsx)("br",{})," Do not send Password Reset link emails unless requested by the User."]}),te&&(0,O.jsxs)(z.Z,{children:["Are you sure you want to delete user"," ",(0,O.jsxs)("b",{style:{color:"black"},children:[Y&&Y,"?"]})," ",(0,O.jsx)("br",{})," All orders, invoices and other associated data will be removed.",(0,O.jsx)("br",{}),(0,O.jsx)("b",{children:(0,O.jsx)("span",{className:"text-danger text-uppercase",children:"This action is irreversible"})})]})]}),(0,O.jsxs)(R.Z,{children:[(0,O.jsx)(f.Z,{color:te?"success":"error",autoFocus:!0,onClick:ce,children:"Exit"}),(0,O.jsx)(f.Z,{color:te?"error":"success",onClick:function(){te?T.Am.promise(ee.delete("/user/username/".concat(G)),{pending:"deleting user from database",success:"Successfully deleted user from database",error:"Could not delete user from database"}).then((function(){ce(),window.location.reload()})):ie()},autoFocus:!0,children:te?"Delete user":"Send Email"})]})]})]})})})}},7247:function(e,r,n){var o=n(5318);r.Z=void 0;var s=o(n(5649)),t=n(184),a=(0,s.default)((0,t.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");r.Z=a},1286:function(e,r,n){var o=n(5318);r.Z=void 0;var s=o(n(5649)),t=n(184),a=(0,s.default)((0,t.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit");r.Z=a},5560:function(e,r,n){var o=n(5318);r.Z=void 0;var s=o(n(5649)),t=n(184),a=(0,s.default)((0,t.jsx)("path",{d:"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"}),"FileDownload");r.Z=a},3553:function(e,r,n){var o=n(5318);r.Z=void 0;var s=o(n(5649)),t=n(184),a=(0,s.default)((0,t.jsx)("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l4 4 4-4H6c0-3.86 3.14-7 7-7s7 3.14 7 7-3.14 7-7 7c-1.9 0-3.62-.76-4.88-1.99L6.7 18.42C8.32 20.01 10.55 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm2 8v-1c0-1.1-.9-2-2-2s-2 .9-2 2v1c-.55 0-1 .45-1 1v3c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-3c0-.55-.45-1-1-1zm-1 0h-2v-1c0-.55.45-1 1-1s1 .45 1 1v1z"}),"LockReset");r.Z=a},6890:function(e,r,n){n.d(r,{Z:function(){return j}});var o=n(7462),s=n(3366),t=n(2791),a=n(8182),i=n(767),c=n(6146),l=n(1402),d=n(7630),u=n(5159);function h(e){return(0,u.Z)("MuiTableHead",e)}(0,n(208).Z)("MuiTableHead",["root"]);var x=n(184),m=["className","component"],f=(0,d.ZP)("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:function(e,r){return r.root}})({display:"table-header-group"}),Z={variant:"head"},p="thead",j=t.forwardRef((function(e,r){var n=(0,l.Z)({props:e,name:"MuiTableHead"}),t=n.className,d=n.component,u=void 0===d?p:d,j=(0,s.Z)(n,m),v=(0,o.Z)({},n,{component:u}),b=function(e){var r=e.classes;return(0,i.Z)({root:["root"]},h,r)}(v);return(0,x.jsx)(c.Z.Provider,{value:Z,children:(0,x.jsx)(f,(0,o.Z)({as:u,className:(0,a.Z)(b.root,t),ref:r,role:u===p?null:"rowgroup",ownerState:v},j))})}))}}]);
//# sourceMappingURL=39.bac5f1c8.chunk.js.map